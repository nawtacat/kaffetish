<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kaffetish - User Profile</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,700;1,400&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    
    <style>
        :root {
            --bg: #FDFBF7;
            --ink: #2C2B2A;
            --accent: #FF3A44;
            --subtle: #8A8886;
            --border-color: #EAE8E4;
            --shadow-color: rgba(44, 43, 42, 0.1);
            --success: #28a745;
            --font-main: 'Lora', serif;
            --font-ui: 'Poppins', sans-serif;
        }

        body.dark-mode {
            --bg: #21201F;
            --ink: #EAE8E4;
            --subtle: #999591;
            --border-color: #3A3837;
            --shadow-color: rgba(0, 0, 0, 0.25);
        }

        ::selection { background-color: var(--accent); color: white; opacity: 0.9; }

        body {
            font-family: var(--font-ui);
            background-color: var(--bg);
            color: var(--ink);
            transition: background-color 0.3s ease, color 0.3s ease;
            margin: 0;
            padding-top: 60px; /* For fixed header */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            box-sizing: border-box;
        }

        /* --- Header --- */
        .app-header {
            position: fixed; top: 0; left: 0; width: 100%; height: 60px;
            background-color: color-mix(in srgb, var(--bg) 85%, transparent);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            border-bottom: 1px solid var(--border-color); z-index: 1000;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }
        .header-content {
            max-width: 1200px; height: 100%; margin: 0 auto; padding: 0 24px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .logo {
            display: flex; align-items: baseline; font-size: 1.6rem;
            font-weight: 500; letter-spacing: -0.5px;
            color: var(--accent); font-family: var(--font-main);
            text-decoration: none;
        }
        body.dark-mode .logo { color: var(--ink); }
        .header-actions { display: flex; align-items: center; gap: 16px; }
        .header-actions button {
            background: transparent; border: none; color: var(--subtle); border-radius: 6px;
            padding: 8px 10px; cursor: pointer; font-size: 1rem;
            transition: color 0.2s ease, background-color 0.2s ease;
        }
        .header-actions button:hover { color: var(--ink); background-color: color-mix(in srgb, var(--border-color) 60%, transparent); }

        /* --- Main Content --- */
        main {
            padding: 48px 24px;
            width: 100%;
            max-width: 900px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .profile-container {
            display: grid;
            grid-template-columns: 1fr 1.2fr;
            width: 100%;
            background-color: color-mix(in srgb, var(--border-color) 20%, transparent);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 10px 30px var(--shadow-color);
        }

        /* --- Left Panel (Benefits/Welcome) --- */
        .benefits-panel {
            padding: 48px;
            background-color: color-mix(in srgb, var(--border-color) 40%, transparent);
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        .benefits-panel h2 {
            font-family: var(--font-main);
            font-size: 2rem;
            font-weight: 500;
            margin: 0 0 16px 0;
            line-height: 1.3;
        }
        .benefits-panel p {
            color: var(--subtle);
            font-size: 1rem;
            line-height: 1.6;
            margin: 0 0 24px 0;
        }
        .benefit-item {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
            font-size: 0.9rem;
        }
        .benefit-item i {
            color: var(--accent);
            font-size: 1.2rem;
            width: 24px;
            text-align: center;
        }
        
        /* --- Right Panel (Form) --- */
        .form-panel {
            padding: 48px;
        }
        .form-panel h3 {
            font-family: var(--font-main);
            font-size: 1.5rem;
            font-weight: 500;
            margin: 0 0 32px 0;
            text-align: left;
            position: relative;
        }
        .form-panel h3::after {
            content: ''; position: absolute; left: 0; bottom: -8px;
            width: 40px; height: 2px; background-color: var(--accent);
        }

        .form-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        .form-field.full-width {
            grid-column: 1 / -1;
        }
        .form-field label {
            display: block;
            font-size: 0.85rem;
            font-weight: 500;
            margin-bottom: 8px;
            color: var(--subtle);
        }
        .form-field input {
            width: 100%;
            padding: 12px 14px;
            font-size: 1rem;
            font-family: var(--font-ui);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background-color: var(--bg);
            color: var(--ink);
            box-sizing: border-box;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .form-field input:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 20%, transparent);
        }
        
        /* --- Buttons & Messages --- */
        .form-actions {
            margin-top: 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 16px;
        }
        .btn {
            font-family: var(--font-ui);
            font-size: 1rem;
            font-weight: 500;
            padding: 12px 24px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .btn-primary {
            background-color: var(--accent);
            color: white;
        }
        .btn-primary:hover {
            background-color: color-mix(in srgb, var(--accent) 90%, black);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px color-mix(in srgb, var(--accent) 40%, transparent);
        }
        .btn-secondary {
            background-color: transparent;
            color: var(--subtle);
        }
        .btn-secondary:hover {
            color: var(--accent);
        }
        .form-message {
            margin-top: 20px;
            padding: 12px;
            border-radius: 8px;
            font-size: 0.9rem;
            text-align: center;
            display: none; /* Hidden by default */
        }
        .form-message.success {
            background-color: color-mix(in srgb, var(--success) 15%, transparent);
            color: color-mix(in srgb, var(--success) 90%, black);
            border: 1px solid color-mix(in srgb, var(--success) 30%, transparent);
        }
        .form-message.error {
            background-color: color-mix(in srgb, var(--accent) 15%, transparent);
            color: var(--accent);
            border: 1px solid color-mix(in srgb, var(--accent) 30%, transparent);
        }

        /* --- Hide/Show Views --- */
        #profile-view {
            display: none;
        }
        
        /* --- Responsive Design --- */
        @media (max-width: 768px) {
            body {
                padding-top: 80px; /* More space for header + content */
                align-items: flex-start;
            }
            main {
                padding: 24px 16px;
            }
            .profile-container {
                grid-template-columns: 1fr;
            }
            .benefits-panel {
                display: none; /* Hide on mobile for a form-focused view */
            }
            .form-panel {
                padding: 32px 24px;
            }
            .form-grid {
                grid-template-columns: 1fr;
            }
             .form-actions {
                flex-direction: column-reverse;
             }
             .btn {
                width: 100%;
             }
        }
    </style>
</head>
<body>
    <header class="app-header">
        <div class="header-content">
            <a href="#" class="logo">Kaffetish</a>
            <div class="header-actions">
                 <button id="mode-toggle" title="Toggle Theme"><i class="fa-solid fa-moon"></i></button>
            </div>
        </div>
    </header>

    <main>
        <!-- REGISTRATION VIEW (Default) -->
        <div class="profile-container" id="register-view">
            <div class="benefits-panel">
                <h2>Create Your Account</h2>
                <p>Join our community to save your reading progress and keep a personal collection of your favorite books.</p>
                <div class="benefit-item">
                    <i class="fa-solid fa-bookmark"></i>
                    <span>Save your reading progress</span>
                </div>
                <div class="benefit-item">
                    <i class="fa-solid fa-book-open"></i>
                    <span>Access your library anywhere</span>
                </div>
                <div class="benefit-item">
                    <i class="fa-solid fa-star"></i>
                    <span>Curate personal collections</span>
                </div>
            </div>
            <div class="form-panel">
                <h3>Register</h3>
                <form id="register-form" novalidate>
                    <div class="form-grid">
                        <div class="form-field">
                            <label for="reg-name">Name</label>
                            <input type="text" id="reg-name" required>
                        </div>
                        <div class="form-field">
                            <label for="reg-surname">Surname</label>
                            <input type="text" id="reg-surname" required>
                        </div>
                        <div class="form-field full-width">
                            <label for="reg-email">Email</label>
                            <input type="email" id="reg-email" required>
                        </div>
                        <div class="form-field full-width">
                            <label for="reg-password">Password</label>
                            <input type="password" id="reg-password" required minlength="8">
                        </div>
                    </div>
                    <div class="form-message" id="register-message"></div>
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Create Account</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- PROFILE SETTINGS VIEW (Shown when logged in) -->
        <div class="profile-container" id="profile-view">
            <div class="benefits-panel">
                <h2>Your Profile</h2>
                <p>Here you can manage your account details and preferences. Your progress is always saved automatically.</p>
                <div class="benefit-item">
                    <i class="fa-solid fa-user-check"></i>
                    <span id="welcome-message">Welcome!</span>
                </div>
                <div class="benefit-item">
                    <i class="fa-solid fa-envelope"></i>
                    <span id="profile-email-display">your.email@example.com</span>
                </div>
            </div>
            <div class="form-panel">
                <h3>Account Settings</h3>
                <form id="profile-form" novalidate>
                     <div class="form-grid">
                        <div class="form-field">
                            <label for="profile-name">Name</label>
                            <input type="text" id="profile-name" required>
                        </div>
                        <div class="form-field">
                            <label for="profile-surname">Surname</label>
                            <input type="text" id="profile-surname" required>
                        </div>
                        <div class="form-field full-width">
                            <label for="profile-email">Email (cannot be changed)</label>
                            <input type="email" id="profile-email" disabled>
                        </div>
                    </div>
                    <div class="form-message" id="profile-message"></div>
                    <div class="form-actions">
                        <button type="button" id="logout-button" class="btn btn-secondary">Log Out</button>
                        <button type="submit" class="btn btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const DOM = {
                body: document.body,
                modeToggle: document.getElementById('mode-toggle'),
                registerView: document.getElementById('register-view'),
                profileView: document.getElementById('profile-view'),
                
                // Registration Form
                registerForm: document.getElementById('register-form'),
                regName: document.getElementById('reg-name'),
                regSurname: document.getElementById('reg-surname'),
                regEmail: document.getElementById('reg-email'),
                regPassword: document.getElementById('reg-password'),
                registerMessage: document.getElementById('register-message'),

                // Profile Form
                profileForm: document.getElementById('profile-form'),
                profileName: document.getElementById('profile-name'),
                profileSurname: document.getElementById('profile-surname'),
                profileEmail: document.getElementById('profile-email'),
                profileMessage: document.getElementById('profile-message'),
                welcomeMessage: document.getElementById('welcome-message'),
                profileEmailDisplay: document.getElementById('profile-email-display'),
                logoutButton: document.getElementById('logout-button'),
            };

            const state = {
                mode: localStorage.getItem("kaffetishMode") || "light",
                user: JSON.parse(localStorage.getItem("kaffetishUser")) || null,
            };

            // --- THEME/MODE ---
            function setMode(mode) {
                state.mode = mode;
                DOM.body.classList.toggle("dark-mode", mode === 'dark');
                const iconClass = mode === 'light' ? 'fa-moon' : 'fa-sun';
                DOM.modeToggle.querySelector('i').className = `fa-solid ${iconClass}`;
                localStorage.setItem("kaffetishMode", mode);
            }

            // --- UI & AUTHENTICATION LOGIC ---
            function showView(view) {
                DOM.registerView.style.display = 'none';
                DOM.profileView.style.display = 'none';
                if (view === 'register') {
                    DOM.registerView.style.display = 'grid';
                } else if (view === 'profile') {
                    DOM.profileView.style.display = 'grid';
                }
            }
            
            function updateUI() {
                if (state.user) {
                    // Logged in
                    DOM.welcomeMessage.textContent = `Welcome, ${state.user.name}!`;
                    DOM.profileEmailDisplay.textContent = state.user.email;
                    DOM.profileName.value = state.user.name;
                    DOM.profileSurname.value = state.user.surname;
                    DOM.profileEmail.value = state.user.email;
                    showView('profile');
                } else {
                    // Logged out
                    showView('register');
                }
            }
            
            function showMessage(element, text, type) {
                element.textContent = text;
                element.className = `form-message ${type}`;
                element.style.display = 'block';
                setTimeout(() => {
                    element.style.display = 'none';
                }, 4000);
            }

            // --- EVENT HANDLERS ---
            function handleRegister(e) {
                e.preventDefault();
                const name = DOM.regName.value.trim();
                const surname = DOM.regSurname.value.trim();
                const email = DOM.regEmail.value.trim();
                const password = DOM.regPassword.value.trim();

                if (!name || !surname || !email || !password) {
                    showMessage(DOM.registerMessage, 'Please fill in all fields.', 'error');
                    return;
                }
                if (password.length < 8) {
                    showMessage(DOM.registerMessage, 'Password must be at least 8 characters long.', 'error');
                    return;
                }

                // Simulate registration
                state.user = { name, surname, email };
                localStorage.setItem("kaffetishUser", JSON.stringify(state.user));
                
                showMessage(DOM.registerMessage, 'Success! A verification email has been sent. Please check your inbox.', 'success');
                
                setTimeout(() => {
                    updateUI();
                }, 1500);
            }

            function handleProfileUpdate(e) {
                e.preventDefault();
                const newName = DOM.profileName.value.trim();
                const newSurname = DOM.profileSurname.value.trim();

                if (!newName || !newSurname) {
                     showMessage(DOM.profileMessage, 'Name and Surname cannot be empty.', 'error');
                    return;
                }

                // Update user data
                state.user.name = newName;
                state.user.surname = newSurname;
                localStorage.setItem("kaffetishUser", JSON.stringify(state.user));

                showMessage(DOM.profileMessage, 'Your profile has been updated successfully!', 'success');
                DOM.welcomeMessage.textContent = `Welcome, ${state.user.name}!`;
            }

            function handleLogout() {
                state.user = null;
                localStorage.removeItem("kaffetishUser");
                updateUI();
            }

            // --- INITIALIZATION ---
            function init() {
                setMode(state.mode);
                updateUI();

                // Event Listeners
                DOM.modeToggle.addEventListener("click", () => setMode(state.mode === 'light' ? 'dark' : 'light'));
                DOM.registerForm.addEventListener('submit', handleRegister);
                DOM.profileForm.addEventListener('submit', handleProfileUpdate);
                DOM.logoutButton.addEventListener('click', handleLogout);
            }

            init();
        });
    </script>
</body>
</html>
